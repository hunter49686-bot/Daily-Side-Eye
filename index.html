<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>The Daily Side-Eye</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  body{
    font-family: Arial, Helvetica, sans-serif;
    margin:20px;
    color:#111;
  }

  header{
    border-bottom:2px solid #ddd;
    margin-bottom:15px;
    padding-bottom:10px;
  }

  h1{
    font-size:32px;
    margin:0;
  }

  .tagline{
    color:#555;
    margin-top:4px;
    font-size:16px;
  }

  .meta{
    color:#666;
    font-size:13px;
    margin-top:6px;
  }

  .columns{
    display:flex;
    gap:30px;
    margin-top:20px;
  }

  .column{
    flex:1;
  }

  /* SECTION HEADERS */
  .section-title{
    font-size:20px;
    font-weight:800;
    margin:20px 0 10px 0;
    border-bottom:1px solid #ddd;
    padding-bottom:4px;
    text-transform:uppercase;
    letter-spacing:0.5px;
  }

  /* STORY BLOCK */
  .story{
    margin-bottom:14px;
  }

  /* HEADLINES */
  .story a{
    text-decoration:none;
    color:#000;
    font-weight:600; /* subtle bold */
    line-height:1.25;
  }

  .story a:hover{
    text-decoration:underline;
  }

  /* FEATURED / BREAKING */
  .story.feature a{
    color:#b30000;
    font-weight:900;
  }

  .badge{
    display:inline-block;
    font-size:11px;
    border:1px solid #aaa;
    border-radius:12px;
    padding:2px 8px;
    margin-right:6px;
    vertical-align:middle;
    color:#333;
  }

  .source{
    color:#777;
    font-size:13px;
    margin-left:4px;
  }

  /* SNARK */
  .snark{
    font-size:14px;
    color:#555;
    font-weight:400;
    margin-top:3px;
  }

  @media(max-width:900px){
    .columns{
      flex-direction:column;
    }
  }
</style>
</head>

<body>

<header>
  <h1 id="site-name">THE DAILY SIDE-EYE</h1>
  <div class="tagline" id="site-tagline">Headlines with a raised eyebrow.</div>
  <div class="meta">
    <span id="date"></span><br>
    Last updated: <span id="updated"></span>
  </div>
</header>

<div class="columns" id="content"></div>

<script>
fetch("headlines.json")
  .then(res => res.json())
  .then(data => {

    // Header
    document.getElementById("site-name").textContent = data.site.name;
    document.getElementById("site-tagline").textContent = data.site.tagline;

    const now = new Date();
    document.getElementById("date").textContent =
      now.toLocaleDateString(undefined,{weekday:"long",year:"numeric",month:"long",day:"numeric"}) +
      ", " +
      now.toLocaleTimeString(undefined,{hour:"numeric",minute:"2-digit"});

    const updated = new Date(data.generated_utc);
    document.getElementById("updated").textContent =
      updated.toLocaleDateString() + ", " +
      updated.toLocaleTimeString(undefined,{hour:"numeric",minute:"2-digit"});

    const content = document.getElementById("content");

    data.columns.forEach(col => {
      const column = document.createElement("div");
      column.className = "column";

      col.sections.forEach(section => {
        if(!section.items || section.items.length === 0) return;

        const title = document.createElement("div");
        title.className = "section-title";
        title.textContent = section.name;
        column.appendChild(title);

        section.items.forEach(item => {
          const story = document.createElement("div");
          story.className = "story" + (item.feature ? " feature" : "");

          let html = "";

          if(item.badge){
            html += `<span class="badge">${item.badge}</span>`;
          }

          html += `<a href="${item.url}" target="_blank">${item.title}</a>`;
          html += `<span class="source">(${item.source})</span>`;

          story.innerHTML = html;

          if(item.snark){
            const snark = document.createElement("div");
            snark.className = "snark";
            snark.textContent = item.snark;
            story.appendChild(snark);
          }

          column.appendChild(story);
        });
      });

      content.appendChild(column);
    });
  });
</script>

</body>
</html>